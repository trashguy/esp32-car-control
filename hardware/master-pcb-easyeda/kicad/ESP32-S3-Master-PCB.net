(export (version D)
  (design
    (source "ESP32-S3-Master-PCB.kicad_sch")
    (date "2026-01-30 03:29:49")
    (tool "Custom Python Generator")
  )
  (components
    (comp (ref C1)
      (value "22uF")
      (footprint "0805")
    )
    (comp (ref C10)
      (value "1uF")
      (footprint "0805")
    )
    (comp (ref C11)
      (value "10uF")
      (footprint "0805")
    )
    (comp (ref C12)
      (value "100nF")
      (footprint "0402")
    )
    (comp (ref C13)
      (value "100nF")
      (footprint "0402")
    )
    (comp (ref C14)
      (value "100nF")
      (footprint "0402")
    )
    (comp (ref C15)
      (value "1nF")
      (footprint "0402")
    )
    (comp (ref C16)
      (value "100nF")
      (footprint "0402")
    )
    (comp (ref C2)
      (value "22uF")
      (footprint "0805")
    )
    (comp (ref C3)
      (value "100nF")
      (footprint "0402")
    )
    (comp (ref C4)
      (value "100nF")
      (footprint "0402")
    )
    (comp (ref C5)
      (value "100nF")
      (footprint "0402")
    )
    (comp (ref C6)
      (value "100nF")
      (footprint "0402")
    )
    (comp (ref C7)
      (value "10uF")
      (footprint "0805")
    )
    (comp (ref C8)
      (value "10uF")
      (footprint "0805")
    )
    (comp (ref C9)
      (value "100nF")
      (footprint "0402")
    )
    (comp (ref D1)
      (value "SS34")
      (footprint "SMA")
    )
    (comp (ref D2)
      (value "SMBJ15A")
      (footprint "SMB")
    )
    (comp (ref D3)
      (value "1N4148W")
      (footprint "SOD-123")
    )
    (comp (ref D4)
      (value "P6KE33CA")
      (footprint "SMB")
    )
    (comp (ref J1)
      (value "Screw_Terminal_2P")
      (footprint "TerminalBlock_5.08mm_2P")
    )
    (comp (ref J10)
      (value "ARM_Debug_2x5")
      (footprint "HDR-2x5-1.27")
    )
    (comp (ref J11)
      (value "Header_1x6_RA")
      (footprint "HDR-1x6-2.54-RA")
    )
    (comp (ref J12)
      (value "JST-PH_2P")
      (footprint "JST-PH-2A")
    )
    (comp (ref J13)
      (value "JST-PH_2P")
      (footprint "JST-PH-2A")
    )
    (comp (ref J14)
      (value "JST-XH_5P")
      (footprint "JST-XH-5A")
    )
    (comp (ref J15)
      (value "JST-XH_5P")
      (footprint "JST-XH-5A")
    )
    (comp (ref J16)
      (value "JST-XH_5P")
      (footprint "JST-XH-5A")
    )
    (comp (ref J17)
      (value "JST-XH_5P")
      (footprint "JST-XH-5A")
    )
    (comp (ref J18)
      (value "JST-XH_5P")
      (footprint "JST-XH-5A")
    )
    (comp (ref J2)
      (value "USB-C")
      (footprint "USB-C-SMD-16P")
    )
    (comp (ref J3)
      (value "JST-XH_7P")
      (footprint "JST-XH-7A")
    )
    (comp (ref J4)
      (value "JST-GH_4P")
      (footprint "JST-GH-4P-SMD")
    )
    (comp (ref J6)
      (value "JST-PH_3P")
      (footprint "JST-PH-3A")
    )
    (comp (ref J7)
      (value "JST-GH_6P")
      (footprint "JST-GH-6P-SMD")
    )
    (comp (ref J8)
      (value "Micro_SD")
      (footprint "MICRO-SD-PUSH")
    )
    (comp (ref J9)
      (value "Header_2x7")
      (footprint "HDR-2x7-2.54")
    )
    (comp (ref L1)
      (value "10uH")
      (footprint "IND-SMD_4x4")
    )
    (comp (ref R1)
      (value "33K")
      (footprint "0402")
    )
    (comp (ref R10)
      (value "22R")
      (footprint "0402")
    )
    (comp (ref R11)
      (value "22R")
      (footprint "0402")
    )
    (comp (ref R12)
      (value "10K")
      (footprint "0402")
    )
    (comp (ref R13)
      (value "10K")
      (footprint "0402")
    )
    (comp (ref R14)
      (value "10K")
      (footprint "0402")
    )
    (comp (ref R15)
      (value "47K")
      (footprint "0402")
    )
    (comp (ref R16)
      (value "47K")
      (footprint "0402")
    )
    (comp (ref R2)
      (value "10K")
      (footprint "0402")
    )
    (comp (ref R20)
      (value "2.2K")
      (footprint "0402")
    )
    (comp (ref R21)
      (value "10K")
      (footprint "0402")
    )
    (comp (ref R22)
      (value "10K")
      (footprint "0402")
    )
    (comp (ref R23)
      (value "200K")
      (footprint "0402")
    )
    (comp (ref R24)
      (value "10K")
      (footprint "0402")
    )
    (comp (ref R25)
      (value "10K")
      (footprint "0402")
    )
    (comp (ref R26)
      (value "10K")
      (footprint "0402")
    )
    (comp (ref R3)
      (value "10K")
      (footprint "0402")
    )
    (comp (ref R4)
      (value "5.1K")
      (footprint "0402")
    )
    (comp (ref R5)
      (value "10K")
      (footprint "0402")
    )
    (comp (ref R6)
      (value "10K")
      (footprint "0402")
    )
    (comp (ref R7)
      (value "10K")
      (footprint "0402")
    )
    (comp (ref R8)
      (value "5.1K")
      (footprint "0402")
    )
    (comp (ref R9)
      (value "5.1K")
      (footprint "0402")
    )
    (comp (ref SW1)
      (value "Reset")
      (footprint "SW-SMD-6x6")
    )
    (comp (ref SW2)
      (value "Boot")
      (footprint "SW-SMD-6x6")
    )
    (comp (ref U1)
      (value "ESP32-S3-WROOM-1-N16R8")
      (footprint "ESP32-S3-WROOM-1")
    )
    (comp (ref U2)
      (value "MP2359DJ-LF-Z")
      (footprint "SOT-23-6")
    )
    (comp (ref U3)
      (value "LM358DR")
      (footprint "SOIC-8")
    )
    (comp (ref U4)
      (value "USBLC6-2SC6")
      (footprint "SOT-23-6")
    )
    (comp (ref U5)
      (value "PC817C")
      (footprint "DIP-4")
    )
    (comp (ref U6)
      (value "LM1815M")
      (footprint "SOIC-8")
    )
    (comp (ref U7)
      (value "MCP23017-E/SO")
      (footprint "SOIC-28")
    )
  )
  (libparts
  )
  (libraries
  )
  (nets
    (net (code 1) (name "+12V")
      (node (ref J1) (pin 1))
      (node (ref D1) (pin A))
      (node (ref U2) (pin VIN))
      (node (ref U3) (pin 8))
      (node (ref D2) (pin K))
      (node (ref J4) (pin 3))
    )
    (net (code 2) (name "+3V3")
      (node (ref U2) (pin OUT))
      (node (ref U1) (pin 3V3))
      (node (ref U1) (pin 3V3_2))
      (node (ref J3) (pin 1))
      (node (ref J7) (pin 5))
      (node (ref J8) (pin VDD))
      (node (ref J9) (pin 3V3))
      (node (ref J10) (pin 1))
      (node (ref J11) (pin 2))
      (node (ref J14) (pin 4))
      (node (ref J15) (pin 4))
      (node (ref J16) (pin 4))
      (node (ref J17) (pin 4))
      (node (ref J18) (pin 4))
      (node (ref C3) (pin 1))
      (node (ref C4) (pin 1))
      (node (ref C5) (pin 1))
      (node (ref C6) (pin 1))
      (node (ref C7) (pin 1))
      (node (ref C8) (pin 1))
      (node (ref C9) (pin 1))
      (node (ref C14) (pin 1))
      (node (ref C16) (pin 1))
      (node (ref R6) (pin 1))
      (node (ref R7) (pin 1))
      (node (ref R12) (pin 1))
      (node (ref R13) (pin 1))
      (node (ref R14) (pin 1))
      (node (ref R15) (pin 1))
      (node (ref R16) (pin 1))
      (node (ref R21) (pin 1))
      (node (ref R22) (pin 1))
      (node (ref R24) (pin 1))
      (node (ref R25) (pin 1))
      (node (ref R26) (pin 1))
      (node (ref U6) (pin 8))
      (node (ref U7) (pin 9))
      (node (ref U7) (pin 18))
    )
    (net (code 3) (name "+5V")
      (node (ref J6) (pin 2))
    )
    (net (code 4) (name "C1_POS")
      (node (ref C1) (pin 1))
      (node (ref U2) (pin VIN))
    )
    (net (code 5) (name "CANH")
      (node (ref J4) (pin 1))
    )
    (net (code 6) (name "CANL")
      (node (ref J4) (pin 2))
    )
    (net (code 7) (name "CC1")
      (node (ref J2) (pin CC1))
      (node (ref R8) (pin 1))
    )
    (net (code 8) (name "CC2")
      (node (ref J2) (pin CC2))
      (node (ref R9) (pin 1))
    )
    (net (code 9) (name "COMM_CS")
      (node (ref U1) (pin GPIO21))
      (node (ref R26) (pin 2))
      (node (ref J7) (pin 4))
    )
    (net (code 10) (name "COMM_MISO")
      (node (ref U1) (pin GPIO3))
      (node (ref J7) (pin 2))
    )
    (net (code 11) (name "COMM_MOSI")
      (node (ref U1) (pin GPIO2))
      (node (ref J7) (pin 1))
    )
    (net (code 12) (name "COMM_SCK")
      (node (ref U1) (pin GPIO14))
      (node (ref J7) (pin 3))
    )
    (net (code 13) (name "EN")
      (node (ref U1) (pin EN))
      (node (ref R6) (pin 2))
      (node (ref C12) (pin 1))
      (node (ref SW1) (pin 1))
      (node (ref J10) (pin 10))
      (node (ref J11) (pin 5))
    )
    (net (code 14) (name "ENC1_CLK")
      (node (ref U7) (pin 21))
      (node (ref J14) (pin 1))
    )
    (net (code 15) (name "ENC1_DT")
      (node (ref U7) (pin 22))
      (node (ref J14) (pin 2))
    )
    (net (code 16) (name "ENC1_SW")
      (node (ref U7) (pin 23))
      (node (ref J14) (pin 3))
    )
    (net (code 17) (name "ENC2_CLK")
      (node (ref U7) (pin 24))
      (node (ref J15) (pin 1))
    )
    (net (code 18) (name "ENC2_DT")
      (node (ref U7) (pin 25))
      (node (ref J15) (pin 2))
    )
    (net (code 19) (name "ENC2_SW")
      (node (ref U7) (pin 26))
      (node (ref J15) (pin 3))
    )
    (net (code 20) (name "ENC3_CLK")
      (node (ref U7) (pin 27))
      (node (ref J16) (pin 1))
    )
    (net (code 21) (name "ENC3_DT")
      (node (ref U7) (pin 28))
      (node (ref J16) (pin 2))
    )
    (net (code 22) (name "ENC3_SW")
      (node (ref U7) (pin 1))
      (node (ref J16) (pin 3))
    )
    (net (code 23) (name "ENC4_CLK")
      (node (ref U7) (pin 2))
      (node (ref J17) (pin 1))
    )
    (net (code 24) (name "ENC4_DT")
      (node (ref U7) (pin 3))
      (node (ref J17) (pin 2))
    )
    (net (code 25) (name "ENC4_SW")
      (node (ref U7) (pin 4))
      (node (ref J17) (pin 3))
    )
    (net (code 26) (name "ENC5_CLK")
      (node (ref U7) (pin 5))
      (node (ref J18) (pin 1))
    )
    (net (code 27) (name "ENC5_DT")
      (node (ref U7) (pin 6))
      (node (ref J18) (pin 2))
    )
    (net (code 28) (name "ENC5_SW")
      (node (ref U7) (pin 7))
      (node (ref J18) (pin 3))
    )
    (net (code 29) (name "FB_NODE")
      (node (ref U2) (pin FB))
      (node (ref R1) (pin 2))
      (node (ref R2) (pin 1))
    )
    (net (code 30) (name "GND")
      (node (ref J1) (pin 2))
      (node (ref D1) (pin K))
      (node (ref D2) (pin A))
      (node (ref U2) (pin GND))
      (node (ref U3) (pin 4))
      (node (ref U4) (pin 2))
      (node (ref U5) (pin 3))
      (node (ref U6) (pin 1))
      (node (ref U6) (pin 4))
      (node (ref U7) (pin 10))
      (node (ref U7) (pin 15))
      (node (ref U7) (pin 16))
      (node (ref U7) (pin 17))
      (node (ref U1) (pin GND))
      (node (ref U1) (pin GND_2))
      (node (ref U1) (pin GND_3))
      (node (ref J2) (pin GND))
      (node (ref J3) (pin 2))
      (node (ref J4) (pin 4))
      (node (ref J6) (pin 3))
      (node (ref J7) (pin 6))
      (node (ref J8) (pin GND))
      (node (ref J9) (pin GND))
      (node (ref J10) (pin 3))
      (node (ref J10) (pin 5))
      (node (ref J10) (pin 9))
      (node (ref J11) (pin 1))
      (node (ref J12) (pin 2))
      (node (ref J13) (pin 2))
      (node (ref J14) (pin 5))
      (node (ref J15) (pin 5))
      (node (ref J16) (pin 5))
      (node (ref J17) (pin 5))
      (node (ref J18) (pin 5))
      (node (ref C1) (pin 2))
      (node (ref C2) (pin 2))
      (node (ref C3) (pin 2))
      (node (ref C4) (pin 2))
      (node (ref C5) (pin 2))
      (node (ref C6) (pin 2))
      (node (ref C7) (pin 2))
      (node (ref C8) (pin 2))
      (node (ref C9) (pin 2))
      (node (ref C10) (pin 2))
      (node (ref C11) (pin 2))
      (node (ref C12) (pin 2))
      (node (ref C13) (pin 2))
      (node (ref C14) (pin 2))
      (node (ref C15) (pin 2))
      (node (ref C16) (pin 2))
      (node (ref R2) (pin 2))
      (node (ref R5) (pin 2))
      (node (ref R8) (pin 2))
      (node (ref R9) (pin 2))
      (node (ref D4) (pin 2))
      (node (ref SW1) (pin 2))
      (node (ref SW2) (pin 2))
    )
    (net (code 31) (name "I2C_SCL")
      (node (ref U1) (pin GPIO48))
      (node (ref U7) (pin 12))
      (node (ref R25) (pin 2))
    )
    (net (code 32) (name "I2C_SDA")
      (node (ref U1) (pin GPIO47))
      (node (ref U7) (pin 13))
      (node (ref R24) (pin 2))
    )
    (net (code 33) (name "IO0")
      (node (ref U1) (pin GPIO0))
      (node (ref R7) (pin 2))
      (node (ref C13) (pin 1))
      (node (ref SW2) (pin 1))
      (node (ref J11) (pin 6))
    )
    (net (code 34) (name "JTAG_TCK")
      (node (ref U1) (pin GPIO39))
      (node (ref J10) (pin 4))
    )
    (net (code 35) (name "JTAG_TDI")
      (node (ref U1) (pin GPIO41))
      (node (ref J10) (pin 8))
    )
    (net (code 36) (name "JTAG_TDO")
      (node (ref U1) (pin GPIO40))
      (node (ref J10) (pin 6))
    )
    (net (code 37) (name "JTAG_TMS")
      (node (ref U1) (pin GPIO42))
      (node (ref J10) (pin 2))
    )
    (net (code 38) (name "MCP23017_A0")
      (node (ref U7) (pin 15))
    )
    (net (code 39) (name "MCP23017_A1")
      (node (ref U7) (pin 16))
    )
    (net (code 40) (name "MCP23017_A2")
      (node (ref U7) (pin 17))
    )
    (net (code 41) (name "MCP23017_INT")
      (node (ref U1) (pin GPIO45))
      (node (ref U7) (pin 20))
    )
    (net (code 42) (name "MCP23017_RESET")
      (node (ref U7) (pin 18))
    )
    (net (code 43) (name "MCP23017_VCC")
      (node (ref U7) (pin 9))
      (node (ref C16) (pin 1))
    )
    (net (code 44) (name "MCP_CS")
      (node (ref U1) (pin GPIO10))
      (node (ref J3) (pin 3))
    )
    (net (code 45) (name "MCP_INT")
      (node (ref U1) (pin GPIO9))
      (node (ref J3) (pin 7))
    )
    (net (code 46) (name "MCP_MISO")
      (node (ref U1) (pin GPIO13))
      (node (ref J3) (pin 4))
    )
    (net (code 47) (name "MCP_MOSI")
      (node (ref U1) (pin GPIO11))
      (node (ref J3) (pin 5))
    )
    (net (code 48) (name "MCP_SCK")
      (node (ref U1) (pin GPIO12))
      (node (ref J3) (pin 6))
    )
    (net (code 49) (name "OPAMP_FB")
      (node (ref R4) (pin 2))
      (node (ref R5) (pin 1))
      (node (ref U3) (pin 2))
    )
    (net (code 50) (name "PWM_AMPLIFIED")
      (node (ref U3) (pin 1))
      (node (ref R4) (pin 1))
      (node (ref J6) (pin 1))
    )
    (net (code 51) (name "PWM_FILTERED")
      (node (ref R3) (pin 2))
      (node (ref C10) (pin 1))
      (node (ref U3) (pin 3))
    )
    (net (code 52) (name "PWM_RAW")
      (node (ref U1) (pin GPIO7))
      (node (ref R3) (pin 1))
    )
    (net (code 53) (name "RPM_12V_IN")
      (node (ref J12) (pin 1))
      (node (ref R20) (pin 1))
    )
    (net (code 54) (name "RPM_COLLECTOR")
      (node (ref U5) (pin 4))
      (node (ref R21) (pin 2))
      (node (ref U1) (pin GPIO1))
    )
    (net (code 55) (name "RPM_EMITTER")
      (node (ref U5) (pin 3))
    )
    (net (code 56) (name "RPM_LED_ANODE")
      (node (ref U5) (pin 2))
      (node (ref D3) (pin K))
    )
    (net (code 57) (name "RPM_LED_CATHODE")
      (node (ref R20) (pin 2))
      (node (ref U5) (pin 1))
    )
    (net (code 58) (name "RPM_PROTECTION")
      (node (ref D3) (pin A))
      (node (ref J12) (pin 2))
    )
    (net (code 59) (name "SD_CD")
      (node (ref U1) (pin GPIO8))
      (node (ref R16) (pin 2))
      (node (ref J8) (pin CD))
    )
    (net (code 60) (name "SD_CS")
      (node (ref U1) (pin GPIO15))
      (node (ref R12) (pin 2))
      (node (ref J8) (pin CS))
    )
    (net (code 61) (name "SD_MISO")
      (node (ref U1) (pin GPIO18))
      (node (ref R15) (pin 2))
      (node (ref J8) (pin MISO))
    )
    (net (code 62) (name "SD_MOSI")
      (node (ref U1) (pin GPIO16))
      (node (ref R13) (pin 2))
      (node (ref J8) (pin MOSI))
    )
    (net (code 63) (name "SD_SCK")
      (node (ref U1) (pin GPIO17))
      (node (ref R14) (pin 2))
      (node (ref J8) (pin SCK))
    )
    (net (code 64) (name "SW_NODE")
      (node (ref U2) (pin SW))
      (node (ref L1) (pin 1))
    )
    (net (code 65) (name "UART_RX")
      (node (ref U1) (pin GPIO44))
      (node (ref J11) (pin 4))
    )
    (net (code 66) (name "UART_TX")
      (node (ref U1) (pin GPIO43))
      (node (ref J11) (pin 3))
    )
    (net (code 67) (name "USB_DM")
      (node (ref J2) (pin D-))
      (node (ref R11) (pin 1))
    )
    (net (code 68) (name "USB_DM_ESP")
      (node (ref R11) (pin 2))
      (node (ref U1) (pin GPIO19))
      (node (ref U4) (pin 3))
    )
    (net (code 69) (name "USB_DP")
      (node (ref J2) (pin D+))
      (node (ref R10) (pin 1))
    )
    (net (code 70) (name "USB_DP_ESP")
      (node (ref R10) (pin 2))
      (node (ref U1) (pin GPIO20))
      (node (ref U4) (pin 1))
    )
    (net (code 71) (name "VBUS")
      (node (ref J2) (pin VBUS))
      (node (ref C11) (pin 1))
      (node (ref U4) (pin 5))
    )
    (net (code 72) (name "VOUT_PRE")
      (node (ref L1) (pin 2))
      (node (ref C2) (pin 1))
      (node (ref R1) (pin 1))
    )
    (net (code 73) (name "VSS_OUTPUT")
      (node (ref U6) (pin 7))
      (node (ref R22) (pin 2))
      (node (ref U1) (pin GPIO38))
    )
    (net (code 74) (name "VSS_RSET")
      (node (ref U6) (pin 6))
      (node (ref R23) (pin 1))
    )
    (net (code 75) (name "VSS_RSET_GND")
      (node (ref R23) (pin 2))
    )
    (net (code 76) (name "VSS_VCC")
      (node (ref U6) (pin 8))
      (node (ref C14) (pin 1))
    )
    (net (code 77) (name "VSS_VR_NEG")
      (node (ref J13) (pin 2))
      (node (ref U6) (pin 4))
    )
    (net (code 78) (name "VSS_VR_POS")
      (node (ref J13) (pin 1))
      (node (ref U6) (pin 3))
      (node (ref C15) (pin 1))
      (node (ref D4) (pin 1))
    )
  )
)