{
  "docType": "5",
  "title": "ESP32-S3-Master-PCB",
  "description": "ESP32-S3 Master Custom PCB for Car Control Project",
  "version": "1.0",
  "components": [
    {
      "ref": "U1",
      "name": "ESP32-S3-WROOM-1-N16R8",
      "lcsc": "C2913202",
      "footprint": "ESP32-S3-WROOM-1",
      "value": "ESP32-S3-WROOM-1-N16R8",
      "pins": {
        "GND": ["1", "40"],
        "3V3": ["2"],
        "EN": ["3"],
        "GPIO4": ["4"],
        "GPIO5": ["5"],
        "GPIO6": ["6"],
        "GPIO7": ["7"],
        "GPIO15": ["8"],
        "GPIO16": ["9"],
        "GPIO17": ["10"],
        "GPIO18": ["11"],
        "GPIO8": ["12"],
        "GPIO19": ["14"],
        "GPIO20": ["15"],
        "GPIO3": ["16"],
        "GPIO46": ["17"],
        "GPIO9": ["18"],
        "GPIO10": ["19"],
        "GPIO11": ["20"],
        "GPIO12": ["21"],
        "GPIO13": ["22"],
        "GPIO14": ["23"],
        "GPIO21": ["24"],
        "GPIO47": ["25"],
        "GPIO48": ["26"],
        "GPIO45": ["27"],
        "GPIO0": ["28"],
        "GPIO35": ["29"],
        "GPIO36": ["30"],
        "GPIO37": ["31"],
        "GPIO38": ["32"],
        "GPIO39": ["33"],
        "GPIO40": ["34"],
        "GPIO41": ["35"],
        "GPIO42": ["36"],
        "RXD0": ["37"],
        "TXD0": ["38"],
        "GPIO2": ["39"]
      }
    },
    {
      "ref": "U2",
      "name": "MP2359DJ-LF-Z",
      "lcsc": "C14259",
      "footprint": "SOT-23-6",
      "value": "MP2359DJ-LF-Z",
      "pins": {
        "VIN": ["1"],
        "GND": ["2"],
        "FB": ["3"],
        "SW": ["4"],
        "BST": ["5"],
        "EN": ["6"]
      }
    },
    {
      "ref": "U3",
      "name": "LM358DR",
      "lcsc": "C7950",
      "footprint": "SOIC-8",
      "value": "LM358DR",
      "pins": {
        "OUT1": ["1"],
        "IN1-": ["2"],
        "IN1+": ["3"],
        "GND": ["4"],
        "IN2+": ["5"],
        "IN2-": ["6"],
        "OUT2": ["7"],
        "VCC": ["8"]
      }
    },
    {
      "ref": "U4",
      "name": "USBLC6-2SC6",
      "lcsc": "C7519",
      "footprint": "SOT-23-6",
      "value": "USBLC6-2SC6",
      "pins": {
        "IO1": ["1"],
        "GND": ["2"],
        "IO2": ["3"],
        "IO3": ["4"],
        "VBUS": ["5"],
        "IO4": ["6"]
      }
    }
  ],
  "nets": [
    {"name": "GND", "class": "power"},
    {"name": "+3V3", "class": "power"},
    {"name": "+12V", "class": "power"},
    {"name": "+5V", "class": "power"},
    {"name": "USB_D+", "class": "signal"},
    {"name": "USB_D-", "class": "signal"},
    {"name": "COMM_MOSI", "class": "signal"},
    {"name": "COMM_MISO", "class": "signal"},
    {"name": "COMM_SCK", "class": "signal"},
    {"name": "COMM_CS", "class": "signal"},
    {"name": "MCP_MOSI", "class": "signal"},
    {"name": "MCP_MISO", "class": "signal"},
    {"name": "MCP_SCK", "class": "signal"},
    {"name": "MCP_CS", "class": "signal"},
    {"name": "MCP_INT", "class": "signal"},
    {"name": "ENC_CLK", "class": "signal"},
    {"name": "ENC_DT", "class": "signal"},
    {"name": "ENC_SW", "class": "signal"},
    {"name": "PWM_OUT", "class": "signal"},
    {"name": "SD_CS", "class": "signal"},
    {"name": "SD_MOSI", "class": "signal"},
    {"name": "SD_SCK", "class": "signal"},
    {"name": "SD_MISO", "class": "signal"},
    {"name": "SD_CD", "class": "signal"},
    {"name": "JTAG_TCK", "class": "signal"},
    {"name": "JTAG_TDO", "class": "signal"},
    {"name": "JTAG_TDI", "class": "signal"},
    {"name": "JTAG_TMS", "class": "signal"},
    {"name": "UART_TX", "class": "signal"},
    {"name": "UART_RX", "class": "signal"},
    {"name": "EN", "class": "signal"},
    {"name": "IO0", "class": "signal"},
    {"name": "CANH", "class": "signal"},
    {"name": "CANL", "class": "signal"}
  ],
  "connections": [
    {"net": "GND", "pins": ["U1.GND", "U2.GND", "U3.GND", "U4.GND", "J1.2", "J2.GND", "J3.2", "J4.4", "J5.5", "J6.3", "J7.6", "J8.GND", "J9.GND", "J10.3", "J10.5", "J10.9", "J11.1"]},
    {"net": "+3V3", "pins": ["U1.3V3", "J3.1", "J5.4", "J7.5", "J8.VDD", "J9.3V3", "J10.1", "J11.2", "R6.1", "R7.1", "R8.1", "R9.1", "R12.1", "R13.1", "R14.1", "R15.1", "R16.1", "R17.1", "R18.1", "R19.1", "C3.1", "C4.1", "C5.1", "C6.1", "C7.1", "C8.1", "C9.1"]},
    {"net": "+12V", "pins": ["J1.1", "U2.VIN", "U3.VCC", "J4.3", "D1.A", "D2.K"]},
    {"net": "USB_D+", "pins": ["J2.D+", "R10.1"]},
    {"net": "USB_D-", "pins": ["J2.D-", "R11.1"]},
    {"net": "GPIO20", "pins": ["U1.GPIO20", "R10.2", "U4.IO1"]},
    {"net": "GPIO19", "pins": ["U1.GPIO19", "R11.2", "U4.IO2"]},
    {"net": "MCP_SCK", "pins": ["U1.GPIO12", "J3.6"]},
    {"net": "MCP_MOSI", "pins": ["U1.GPIO11", "J3.5"]},
    {"net": "MCP_MISO", "pins": ["U1.GPIO13", "J3.4"]},
    {"net": "MCP_CS", "pins": ["U1.GPIO10", "J3.3"]},
    {"net": "MCP_INT", "pins": ["U1.GPIO9", "J3.7"]},
    {"net": "CANH", "pins": ["J4.1"]},
    {"net": "CANL", "pins": ["J4.2"]},
    {"net": "ENC_CLK", "pins": ["U1.GPIO4", "J5.1", "R17.2"]},
    {"net": "ENC_DT", "pins": ["U1.GPIO5", "J5.2", "R18.2"]},
    {"net": "ENC_SW", "pins": ["U1.GPIO6", "J5.3", "R19.2"]},
    {"net": "PWM_OUT", "pins": ["U1.GPIO7", "R3.1"]},
    {"net": "PWM_FILTERED", "pins": ["R3.2", "C10.1", "U3.IN1+"]},
    {"net": "PWM_ANALOG", "pins": ["U3.OUT1", "R4.1", "J6.1"]},
    {"net": "OPAMP_FB", "pins": ["R4.2", "R5.1", "U3.IN1-"]},
    {"net": "COMM_MOSI", "pins": ["U1.GPIO2", "J7.1"]},
    {"net": "COMM_MISO", "pins": ["U1.GPIO3", "J7.2"]},
    {"net": "COMM_SCK", "pins": ["U1.GPIO14", "J7.3"]},
    {"net": "COMM_CS", "pins": ["U1.GPIO21", "J7.4"]},
    {"net": "SD_CS", "pins": ["U1.GPIO15", "J8.CS", "R12.2"]},
    {"net": "SD_MOSI", "pins": ["U1.GPIO16", "J8.MOSI", "R13.2"]},
    {"net": "SD_SCK", "pins": ["U1.GPIO17", "J8.SCK", "R14.2"]},
    {"net": "SD_MISO", "pins": ["U1.GPIO18", "J8.MISO", "R15.2"]},
    {"net": "SD_CD", "pins": ["U1.GPIO8", "J8.CD", "R16.2"]},
    {"net": "JTAG_TCK", "pins": ["U1.GPIO39", "J10.4"]},
    {"net": "JTAG_TDO", "pins": ["U1.GPIO40", "J10.6"]},
    {"net": "JTAG_TDI", "pins": ["U1.GPIO41", "J10.8"]},
    {"net": "JTAG_TMS", "pins": ["U1.GPIO42", "J10.2"]},
    {"net": "UART_TX", "pins": ["U1.TXD0", "J11.3"]},
    {"net": "UART_RX", "pins": ["U1.RXD0", "J11.4"]},
    {"net": "EN", "pins": ["U1.EN", "R6.2", "C12.1", "SW1.1", "J10.10", "J11.5"]},
    {"net": "IO0", "pins": ["U1.GPIO0", "R7.2", "C13.1", "SW2.1", "J11.6"]}
  ],
  "design_rules": {
    "clearance_mm": 0.2,
    "track_width_mm": 0.25,
    "track_width_power_mm": 0.5,
    "via_diameter_mm": 0.6,
    "via_drill_mm": 0.3
  },
  "pcb": {
    "width_mm": 75,
    "height_mm": 55,
    "layers": 2,
    "thickness_mm": 1.6
  }
}
